stages:
  - test

playwright-e2e:
  stage: test
  tags:
    - playwright   # must match runner tag
  variables:
    BASE_URL: "https://example.com"
    API_KEY: $API_KEY
  script:
    - npm ci
    - npx playwright install --with-deps
    - npx playwright test --reporter=html
  artifacts:
    when: always
    paths:
      - playwright-report
      - test-results
      - test-results/screenshots
    expire_in: 7 days
